(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{300:function(a,s,t){"use strict";t.r(s);var e=t(14),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"oracle-postgres-migration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#oracle-postgres-migration"}},[a._v("#")]),a._v(" ORACLE - POSTGRES MIGRATION")]),a._v(" "),s("h2",{attrs:{id:"target"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#target"}},[a._v("#")]),a._v(" Target")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("To have Fundmaster XE run on PostgreSQL Database \n")])])]),s("h2",{attrs:{id:"why"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#why"}},[a._v("#")]),a._v(" Why")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("    1.Cost: Oracle license costs, using Oracle databases incurs additional costs for features like partitioning and high availability, and expenses can add up quickly. Open-source PostgreSQL is free to install and use.\n    2.Flexibility: PostgreSQL has open-source licensing and is easily available from public cloud providers, including AWS. With PostgreSQL, you’re not at risk of vendor lock-in.\n    3.Customizability: Because PostgreSQL is open-source, there are countless extensions and add-ons that can improve database performance markedly, and many of them are free to use. With Oracle, similar features quickly add up in cost.\n  SOURCE: https://www.enterprisedb.com/blog/the-complete-oracle-to-postgresql-migration-guide-tutorial-move-convert-database-oracle-alternative\n")])])]),s("h4",{attrs:{id:"do-we-need-oracle-database-to-postgres-database-migration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#do-we-need-oracle-database-to-postgres-database-migration"}},[a._v("#")]),a._v(" Do we need Oracle database to Postgres database migration")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("NO. With JPA/HIBERNATE technology, On Installation Fundmaster XE generates tables from entities.\n")])])]),s("h2",{attrs:{id:"conversion-process"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#conversion-process"}},[a._v("#")]),a._v(" Conversion Process")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("1. Modify Models/Entities to be postgres compatible . Eg using SEQUENCE generation type IDs\n   source: https://vladmihalcea.com/jpa-entity-identifier-sequence/\n   https://thorben-janssen.com/hibernate-postgresql-5-things-need-know/\n   Changing column precision scales from 20 to 16 for Bigdecimals\n2. Convert DTOs variables to lower case, postgres converts everything to lower case. Do not use \\\"xxx\\\" in sql statements.\n3. Replace NVL with coalesce.\n4. Replace sysdate() with aws_oracle_ext.sysdate().\n5. Cast to BigInteger all select count resultsets and single column results whose datatype is bigint, same to any other datatype else will throw an error.\n6. Replace all `hibernate_sequence.nextval` with nextval('hibernate_sequence').\n7. Replace list_agg with string_agg.\n8. Use appropriate date functions.\n9. Check all native queries\n10. Cast to BigInteger all select nextval('hibernate_sequence') resultsets\n11. All sub-queries must have an alias\n12. Use 'yyyy-MM-dd' in to_date() function, and convert all first arguments to string. Use custom function dateformat to achieve this. see examples below\n13. Remove force keyword in create view sql\n\n")])])]),s("h3",{attrs:{id:"process"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#process"}},[a._v("#")]),a._v(" Process")]),a._v(" "),s("ul",[s("li",[a._v("[x] Set up PostgresSQL Database")]),a._v(" "),s("li",[a._v("[x] Set up data sources and persistence")]),a._v(" "),s("li",[a._v("[x] Make initial XE deployment")]),a._v(" "),s("li",[a._v("[x] Fix the models/entities")]),a._v(" "),s("li",[a._v("[x] Redeploy")]),a._v(" "),s("li",[a._v("[ ] Migrate Views & Routines")]),a._v(" "),s("li",[a._v("[ ] Migrate Native Queries")]),a._v(" "),s("li",[a._v("[x] Data Migration, From Oracle cloud to postgres db")]),a._v(" "),s("li",[a._v("[ ] Testing")])]),a._v(" "),s("h3",{attrs:{id:"webapp-folder"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webapp-folder"}},[a._v("#")]),a._v(" Webapp folder")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("-user_doc\n-WEB-INF\n-XiManual\n-backup.txt\ntemplate_instructions.txt\n")])])]),s("h2",{attrs:{id:"changes-made-in-code"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#changes-made-in-code"}},[a._v("#")]),a._v(" Changes Made In Code")]),a._v(" "),s("h3",{attrs:{id:"models"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#models"}},[a._v("#")]),a._v(" Models")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//@GeneratedValue(strategy = GenerationType.IDENTITY)")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@GeneratedValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("strategy "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("GenerationType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SEQUENCE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Long")]),a._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v('//@Column(name = "spot_rate", precision=16,scale=20)')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Column")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"spot_rate"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("BigDecimal")]),a._v(" spotRate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//DTO")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//used BigInteger and Long for Ids, all variables in lowercase for mapping using transformers")]),a._v("\n")])])]),s("h2",{attrs:{id:"native-queries"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#native-queries"}},[a._v("#")]),a._v(" Native Queries")]),a._v(" "),s("h3",{attrs:{id:"update"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#update"}},[a._v("#")]),a._v(" UPDATE")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- update MEMBERS m set m.EXIT_ID=NULL where m.ID=:memberId and m.EXIT_ID=:exitId and m.MBSHIP_STATUS='ACTIVE';")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("update")]),a._v(" MEMBERS m\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("set")]),a._v(" EXIT_ID"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("ID "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" :memberId\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("and")]),a._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("EXIT_ID "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" :exitId\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("and")]),a._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("MBSHIP_STATUS "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'ACTIVE'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"select"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#select"}},[a._v("#")]),a._v(" SELECT")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- select m.MBSHIP_STATUS status, mb.GENDER gender from members m INNER JOIN MEMBERS_BIOS mb on m.MEMBERBIO_ID = mb.ID where m.ID=7165;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("MBSHIP_STATUS "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("AS")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("status")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" mb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("GENDER "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("AS")]),a._v(" gender\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" members m\n         "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("INNER")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("JOIN")]),a._v(" MEMBERS_BIOS mb "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("on")]),a._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("MEMBERBIO_ID "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" mb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("ID\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("ID "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7165")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"hibernate-sequence"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hibernate-sequence"}},[a._v("#")]),a._v(" HIBERNATE SEQUENCE")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" nextval"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'hibernate_sequence'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"add-months"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#add-months"}},[a._v("#")]),a._v(" ADD MONTHS")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" add_months"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("cast"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("sysdate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"months-between"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#months-between"}},[a._v("#")]),a._v(" MONTHS BETWEEN")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- select months_between(:startPeriod,sysdate) ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" DATE_PART"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'year'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" :startPeriod::"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" DATE_PART"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'year'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("current_timestamp")]),a._v("::"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--Returns number of Years")]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" months_between"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v("\nEg "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" months_between"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'2022-07-29 05:14:48'")]),a._v("::"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("current_date")]),a._v("::"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"date-time"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#date-time"}},[a._v("#")]),a._v(" DATE TIME")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- SELECT sysdate")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("current_timestamp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" aws_oracle_ext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sysdate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"to-date"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#to-date"}},[a._v("#")]),a._v(" TO_DATE")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" to_date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'2021-08-26'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'YYYY-MM-DD'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"date-diff-in-days"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#date-diff-in-days"}},[a._v("#")]),a._v(" DATE DIFF IN DAYS")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("current_date")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'2021-08-01'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" dys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" daterange_subdiff"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("current_date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'2021-08-01'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" dys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"last-day"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#last-day"}},[a._v("#")]),a._v(" LAST_DAY")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- Created custom function last_day(date)")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" last_day"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("::"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),s("h3",{attrs:{id:"rownum"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rownum"}},[a._v("#")]),a._v(" ROWNUM")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- select  ROWNUM FROM MEMBERS m;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" row_number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("over")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("order")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("by")]),a._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" MEMBERS m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- select  ROWNUM FROM MEMBERS m where rownum=1;")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" row_number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("over")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("order")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("by")]),a._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" MEMBERS m\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("LIMIT")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"nvl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nvl"}},[a._v("#")]),a._v(" NVL")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- select nvl(c.ee, 0);")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("coalesce")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("ee"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"instr"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instr"}},[a._v("#")]),a._v(" INSTR")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- select INSTR('xxx.xxx', '.');")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" position"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'.'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("in")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'xxx.xxx'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"lob"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lob"}},[a._v("#")]),a._v(" LOB")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[a._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//add @Type for postgres to know what type of lob ie ImageType/TextType etc")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Lob")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("type "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"org.hibernate.type.TextType"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"describe-table"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#describe-table"}},[a._v("#")]),a._v(" DESCRIBE TABLE")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" table_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" column_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" data_type\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" information_schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("columns")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" table_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'members'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"list-all-procedures"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#list-all-procedures"}},[a._v("#")]),a._v(" LIST ALL PROCEDURES")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("nspname "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("schema")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n       p"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("proname "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("procedure")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" pg_proc p\n         "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("join")]),a._v(" pg_namespace n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("on")]),a._v(" p"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("pronamespace "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("oid\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("nspname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("not")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("in")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'pg_catalog'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'information_schema'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("and")]),a._v(" p"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("prokind "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'p'")]),a._v("\n")])])]),s("h3",{attrs:{id:"format-date"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#format-date"}},[a._v("#")]),a._v(" FORMAT DATE")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" TO_CHAR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("NOW")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" :: "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("DATE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Mon dd, yyyy'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"examples"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[a._v("#")]),a._v(" Examples")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" todate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("current_date")]),a._v("::"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" to_date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'30-Sep-2021'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'dd-Mon-yyyy'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" todate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("to_char"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'2021-09-30'")]),a._v("::"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'dd-MON-yyyy'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" todate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'30-Sep-2021'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" dateformat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("::"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" to_date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("to_char"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("::"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'dd-Mon-yyyy'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'dd-Mon-yyyy'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" to_date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'2020-08-30'")]),a._v("::"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'dd-Mon-yyyy'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" todate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("current_date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" date_trunc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'month'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("current_date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" todate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("date_trunc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'month'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("current_date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" to_timestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'2022-01-01'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'YYYY-MM-DD'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h3",{attrs:{id:"error"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#error"}},[a._v("#")]),a._v(" ERROR")]),a._v(" "),s("ul",[s("li",[a._v("[x] NonUniqueDiscoveredSqlAliasException: Encountered a duplicated sql alias\n"),s("code",[a._v("sql has more than one column with same name, introduce alias")])]),a._v(" "),s("li",[a._v("[x] Could not resolve PropertyAccess for dateAcquired on class com.systech.fm.dto.accounts.FixedAssetsDto\n"),s("code",[a._v("Find the attribute in the DTO and change to lowercase")])])]),a._v(" "),s("h2",{attrs:{id:"login-user"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#login-user"}},[a._v("#")]),a._v(" Login User")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("psql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" posgres\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("pwd")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("postgres"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\npsql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-V")]),a._v(" psql "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" psql "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("PostgreSQL"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12.6")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),s("h2",{attrs:{id:"import-database"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#import-database"}},[a._v("#")]),a._v(" Import Database")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("pg_restore "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dbname")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("fm "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--create")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--verbose")]),a._v(" c:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("pgbackup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("fm.tar\n")])])]),s("h2",{attrs:{id:"run-sql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run-sql"}},[a._v("#")]),a._v(" Run SQL")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#LOGIN TO PSQL")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("i path_to_sql_file\n")])])]),s("h2",{attrs:{id:"import-million-records-faster"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#import-million-records-faster"}},[a._v("#")]),a._v(" Import Million Records Faster")]),a._v(" "),s("div",{staticClass:"language-postgresql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("create table peopleNames\n(\n    name  varchar(255),\n    sex   varchar(255),\n    sex_1 varchar(255),\n    count bigint,\n    year  bigint\n);\n--FROM TERMINAL\nCOPY peopleNames FROM '/path/to/pp-complete.csv' with (format csv, encoding 'utf-8', header false, null '', quote '\"');\n")])])]),s("h2",{attrs:{id:"split-delimited-string"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#split-delimited-string"}},[a._v("#")]),a._v(" Split Delimited String")]),a._v(" "),s("div",{staticClass:"language-postgresql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("select unnest(string_to_array('1,2,3,4,5', ',')) as id;\n--or\nSELECT regexp_split_to_table('1,2,3,4,5', ',') AS ID;\n--https://medium.com/swlh/three-routes-convert-comma-separated-column-to-rows-c17c85079ecf\n")])])]),s("h2",{attrs:{id:"drop-all-views"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#drop-all-views"}},[a._v("#")]),a._v(" Drop All Views")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'DROP VIEW '")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("table_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' cascade;'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" information_schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("views\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" table_schema "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("IN")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'public'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--copy and save to file and execute")]),a._v("\n")])])]),s("h2",{attrs:{id:"show-all-tables-in-schema"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#show-all-tables-in-schema"}},[a._v("#")]),a._v(" Show All Tables In Schema")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" table_name\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" information_schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("tables")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" table_schema "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'public'")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("and")]),a._v(" table_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("like")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'act_%'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("----------------------------")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'DROP TABLE '")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("table_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' cascade;'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" qry\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" information_schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("tables")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" table_schema "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("IN")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'public'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("and")]),a._v(" table_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("like")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'act_%'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h2",{attrs:{id:"important-scripts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#important-scripts"}},[a._v("#")]),a._v(" Important Scripts")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ALTER")]),a._v(" SEQUENCE hibernate_sequence RESTART "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WITH")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("12879141")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" VIEW_NAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" OWNER\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" all_views\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" OWNER "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'FM'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--ORACLE DB")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" viewname\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" pg_catalog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("pg_views\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" schemaname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'public'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--get all views in schema")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("count")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("viewname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" pg_catalog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("pg_views\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" schemaname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'public'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" pg_terminate_backend"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("pg_stat_activity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("pid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" pg_stat_activity\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" pg_stat_activity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("datname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Xe'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" pg_stat_activity\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" datname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Xe'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" datname\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" pg_database"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("--get database names")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("DELETE")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" pg_catalog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("pg_database\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" datname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Xe'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" pg_catalog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("pg_tables\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" schemaname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'pg_catalog'")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("AND")]),a._v(" schemaname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'information_schema'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" tablename\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" pg_catalog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("pg_tables\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" schemaname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'pg_catalog'")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("AND")]),a._v(" schemaname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'information_schema'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h2",{attrs:{id:"installing-extension"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installing-extension"}},[a._v("#")]),a._v(" Installing Extension")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("   We will be installing tsm_system_rows extension for quick randomizing rows in a table.\n   1.   Download postgres source from [https://www.postgresql.org/ftp/source/]\n   2.   Unzip and cd to folder.\n   3.   bash# sudo ./configure --without-readline --with-pgconfig=/usr/pgsql-14/bin/pg_config\n   4.   bash# make\n   5.   cd ./contrib/tsm_system_rows/\n   6.   bash# sudo make install\n   7.   We need to know where to paste the output, run (CREATE EXTENSION tsm_system_rows;) and note the error path\n   8.   Copy tsm_system_rows--1.0.sql &amp; tsm_system_rows.control to [/usr/pgsql-14/share/extension]\n   9.   Copy tsm_system_rows.so to [/usr/pgsql-14/lib]\n   10.  Lauch psql shell [psql -U postgres]\n   11.  psql# create extension tsm_system_rows;\n   12.  Test psql# SELECT * FROM my_table TABLESAMPLE SYSTEM_ROWS(100);\n   \n   Installing pg_cron extension\n    git clone https://github.com/citusdata/pg_cron.git\n    cd pg_cron\n    # Ensure pg_config is in your path, e.g.\n    export PATH=/usr/pgsql-11/bin:$PATH\n    make &amp;&amp; sudo PATH=$PATH make install\n")])])]),s("h2",{attrs:{id:"database-queries"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#database-queries"}},[a._v("#")]),a._v(" Database Queries")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'alter table '")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" owner "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'.'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" table_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' disable constraint '")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" constraint_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("';'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" user_constraints"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'alter table '")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" owner "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'.'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" table_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' enable constraint '")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" constraint_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("';'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" user_constraints"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" pg_terminate_backend"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("pg_stat_activity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("pid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" pg_stat_activity\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" pg_stat_activity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("datname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Xe'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" pg_stat_activity\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" datname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Xe'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" datname\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" pg_database"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("DELETE")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" pg_catalog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("pg_database\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" datname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Xe'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" pg_catalog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("pg_tables\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" schemaname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'pg_catalog'")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("AND")]),a._v(" schemaname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'information_schema'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" tablename\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" pg_catalog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("pg_tables\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" schemaname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'pg_catalog'")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("AND")]),a._v(" schemaname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'information_schema'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h2",{attrs:{id:"alter-table-columns"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#alter-table-columns"}},[a._v("#")]),a._v(" Alter Table Columns")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("with")]),a._v(" mitables\n         "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" unnest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ARRAY "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'closing_balances'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'BENEFITS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'BENEFIT_PAYMENTS'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'PROV_BEN_BAL'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'FUND_VALUES'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" tb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'alter table '")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" tb "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" mitables "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("tb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" table_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' alter column '")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" column_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' type numeric(19,10);'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" information_schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("columns")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" table_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("in")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("tb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" mitables"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("and")]),a._v(" data_type "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'numeric'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" information_schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("columns")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" table_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'closing_balances'")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("and")]),a._v(" data_type "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'numeric'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'update closing_balances set '")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" column_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'=0 where '")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" column_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' is null and id=1283097;'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" information_schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("columns")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" table_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'closing_balances'")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("and")]),a._v(" data_type "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'numeric'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h2",{attrs:{id:"reset-database-notifications"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reset-database-notifications"}},[a._v("#")]),a._v(" Reset Database Notifications")]),a._v(" "),s("div",{staticClass:"language-SQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("update")]),a._v(" SCHEMES\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("set")]),a._v(" EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      SECONDARY_EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      FIXED_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      SECONDARY_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      ALLOW_NOTIFICATIONS"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- schemenames")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("update")]),a._v(" SPONSORS\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("set")]),a._v(" EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    FIXED_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    SECONDARY_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    SECONDARY_EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("update")]),a._v(" COMPANIES\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("set")]),a._v(" EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    SECONDARY_EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    FIXED_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    SECONDARY_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- member names")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("update")]),a._v(" MEMBERS_BIOS\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SET")]),a._v(" CELL_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    FIXED_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("FIRSTNAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    SECONDARY_EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("coalesce")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SURNAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" FIRSTNAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    PIN"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    ID_NO"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("update")]),a._v(" NOTIFICATION_CONFIGS\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("set")]),a._v(" benefitpaymentappr"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    benefitpaymentcert"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    benefitpaymentpost"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    claimapproval"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    claimauthorization"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    claimcancellation"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    claimcertification"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    claiminitialization"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    claimmissingdocs"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    claimprocessingtoacc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    contributionbilling"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    contributionposting"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    contributionreceipting"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    endorsementapproval"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    endorsementrejection"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    isglobal"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    memberapproval"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    memberauthorization"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    memberbioupdate"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    memberbirthday"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    membercertification"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    membercreation"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    onetimemiscellaneousmsg"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    reserveinflow"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    reserveoutflow"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    retirementcontributionsauthorization"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    retirementcontributionsprocessing"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    schemecreation"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    sponsorcontrreminder"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    sponsorcontrwithoutschedule"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    sponsoronmemberapproval"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    straighttobankpush"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    straighttobankrollback"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    contributionsponsorposting"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    deathinretirement"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    eventsdocuments"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    eventsreminder"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    eventsupdate"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    generationofcoe"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    pensionarrears"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    pensiondeduction"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    pensionrevisionapproval"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    pensionrevisioncertification"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    pensionerapproval"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    pensionerreinstatement"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    pensionersuspension"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    retirementnotification"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    sendnotificationonfirstdeclaredbalancerun"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    usesecondaryemailforclaimrelatednotification"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    docsexpiry"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    eventdeclination"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    exitoptionform"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    hremail"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    hrretirementnotification"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    member_ben_creation"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    member_ben_update"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    membersnotcontributedinawhile"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    allow_notification_to_scheme"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    ret_contr_authorization"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    ret_contrs_proc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    declared_bal_not"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    trusteelicenseexpiry"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    secondary_email_claim_not"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    withoutnominatedbeneficiary"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    membermerger"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    members_not_cont_dea"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    transfervalueoptionform"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- minor names")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("update")]),a._v(" MINORS\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SET")]),a._v(" CELL_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    FIXED_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("FIRST_NAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    SECONDARY_EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("coalesce")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SURNAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" FIRST_NAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("update")]),a._v(" SERVICE_PROVIDERS\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SET")]),a._v(" CELL_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    FIXED_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("NAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    SECONDARY_EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("coalesce")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("NAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" ACCOUNTNUMBER"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("update")]),a._v(" CUSTODIANS\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SET")]),a._v(" CELL_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    FIXED_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("NAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    SECONDARY_EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("NAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("update")]),a._v(" banks\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SET")]),a._v(" CELL_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    FIXED_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("NAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    SECONDARY_EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("NAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("update")]),a._v(" PRINCIPAL_OFFICERS\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SET")]),a._v(" CELL_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    FIXED_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("NAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    SECONDARY_EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("NAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("update")]),a._v(" USERS\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SET")]),a._v(" MOBILE_NUMBER"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("FIRSTNAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("update")]),a._v(" SMTP_MAIL_SETUP\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("set")]),a._v(" ALLOWNOTIFICATIONS"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    SMTP_AUTH_USER"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    SENDING_EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'bursting.reports@gmail.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    SMTP_AUTH_PWD"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'some_pwd'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("update")]),a._v(" ESTATE_MANAGERS\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SET")]),a._v(" CELL_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    FIXED_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("NAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    SECONDARY_EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("NAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("update")]),a._v(" BENEFICIARIES\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SET")]),a._v(" CELL_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    FIXED_PHONE"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("FIRSTNAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    SECONDARY_EMAIL"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("lower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("FIRSTNAME"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@mailinator.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("delete")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" MAILS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("delete")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" SMSES"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("commit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),s("h2",{attrs:{id:"backup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#backup"}},[a._v("#")]),a._v(" Backup")]),a._v(" "),s("h3",{attrs:{id:"all-commands"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#all-commands"}},[a._v("#")]),a._v(" All Commands")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("Export\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v("\tpg_dump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" testdb "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" dump"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +%Y%m%d%H%M%S"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(".sql\n\t\tpg_dump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" fundmaster "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" backup/fundmaster"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +%Y%m%d%H%M%S"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(".sql\nImport\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v("\tpsql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" xe "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" myInsertFile\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("i dump.sql\n\nExport\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v("\tpg_dump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" xe "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--format")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("t "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--encoding")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("UTF-8 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" dump"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +%Y%m%d%H%M%S"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(".tar\nImport\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v("\tpg_restore "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" pacific "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" ./aws-schemas.tar "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-W")]),a._v("\n\n\t\t-- Large Databases\nExport\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v("\tpg_dump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" username "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" num "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-F")]),a._v(" d "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" out.dir dbname "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n\t\tpg_dump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-F")]),a._v(" d "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" ./nassitdb"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +%Y%m%d%H%M%S"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" nassitdb "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\nImport\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v("\tpg_restore "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" nassitdb ./nassitdb"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +%Y%m%d%H%M%S"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n\nExport\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v("\tpg_dump dbname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("gzip")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" filename.gz\nImport\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v("\tgunzip "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" filename.gz "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" psql dbname\n\nExport\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v("\tpg_dump dbname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("split")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-b")]),a._v(" 2G - filename\nImport\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v("\t"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" filename* "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" psql dbname\n\nExport\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v("\tpg_dump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Fc")]),a._v(" dbname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" filename\nImport\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v("\tpg_restore "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" dbname filename\n\n\t\t-- Large Databases\nExport\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v("\tpg_dump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" username "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Fc")]),a._v(" dbname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("split")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-b")]),a._v(" 2G - filename\n\t\tpg_dump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Fc")]),a._v(" nassitdb "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("split")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-b")]),a._v(" 5G - nassitdb"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +%Y%m%d%H%M%S"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\nImport\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v("\tpg_restore "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" dbname filename "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n")])])]),s("h3",{attrs:{id:"favourite-commands"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#favourite-commands"}},[a._v("#")]),a._v(" Favourite Commands")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("-- Fast\npg_dump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-F")]),a._v(" d "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" ./nassitdb"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +%Y%m%d%H%M%S"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" nassitdb "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\npg_restore "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" nassitdb ./nassitdb"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +%Y%m%d%H%M%S"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n\n-- Slower\npg_dump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Fc")]),a._v(" nassitdb "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("split")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-b")]),a._v(" 5G - nassitdb"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("date")]),a._v(" +%Y%m%d%H%M%S"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\npg_restore "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" nassitdb nassitdump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n")])])]),s("h2",{attrs:{id:"remote-connection"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#remote-connection"}},[a._v("#")]),a._v(" Remote Connection")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("psql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.7")]),a._v(".212.215 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5432")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" fundmaster "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-W")]),a._v(" \n")])])]),s("h2",{attrs:{id:"creating-a-cluster"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-cluster"}},[a._v("#")]),a._v(" Creating A Cluster")]),a._v(" "),s("p",[a._v("Switch to user postgres")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("su")]),a._v(" - postgres\n")])])]),s("p",[a._v("Create a data directory to store cluster db files")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("YOUR_FOLDER_NAME"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("p",[a._v("Initialize the database cluster")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("initdb "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-D")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("YOUR_FOLDER_NAME"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("p",[a._v("Edit configuration files")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("YOUR_FOLDER_NAME"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("p",[a._v("Edit "),s("span",{staticStyle:{color:"orangered"}},[s("i",[a._v("postgresql.conf")])])]),a._v(" "),s("blockquote",[s("p",[a._v("localhost: '*'")])]),a._v(" "),s("blockquote",[s("p",[a._v("port : <YOUR_PORT>")])]),a._v(" "),s("p",[a._v("Edit "),s("span",{staticStyle:{color:"orangered"}},[s("i",[a._v("pg_hba.conf")])])]),a._v(" "),s("blockquote",[s("p",[a._v("Edit to match your desired configurations")])]),a._v(" "),s("p",[a._v("Start the cluster")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("pg_ctl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-D")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("YOUR_FOLDER_NAME"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" logfile start\n")])])]),s("p",[a._v("Stop the cluster")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("pg_ctl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-D")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("YOUR_FOLDER_NAME"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" immediate stop\n")])])]),s("h2",{attrs:{id:"streaming-replication-v14"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#streaming-replication-v14"}},[a._v("#")]),a._v(" Streaming Replication v14")]),a._v(" "),s("p",[a._v("We need two servers i.e Master & Slave.")]),a._v(" "),s("h3",{attrs:{id:"master-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#master-server"}},[a._v("#")]),a._v(" MASTER SERVER")]),a._v(" "),s("p",[a._v("Create Replication user")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("CREATE")]),a._v(" ROLE replicator "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WITH")]),a._v(" LOGIN NOSUPERUSER NOCREATEDB NOCREATEROLE NOINHERIT "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("REPLICATION")]),a._v(" CONNECTION "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("LIMIT")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" PASSWORD "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'Qwerty123'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[a._v("Edit "),s("span",{staticStyle:{color:"orangered"}},[s("i",[a._v("postgresql.conf")])])]),a._v(" "),s("blockquote",[a._v("\n  wal_level = replica "),s("br"),a._v("\n  max_wal_senders = 100\n")]),a._v(" "),s("p",[a._v("Edit "),s("span",{staticStyle:{color:"orangered"}},[s("i",[a._v("pg_hba.conf")])])]),a._v(" "),s("blockquote",[a._v("\n  host replication all "),s("span",{staticStyle:{color:"deepskyblue"}},[a._v("slave_ip_address/32 ")]),a._v(" trust "),s("br"),a._v("\n  host replication replicator "),s("span",{staticStyle:{color:"deepskyblue"}},[a._v("slave_ip_address/32 ")]),a._v(" trust\n")]),a._v(" "),s("p",[a._v("Restart the postgres service.")]),a._v(" "),s("h3",{attrs:{id:"slave-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#slave-server"}},[a._v("#")]),a._v(" SLAVE SERVER")]),a._v(" "),s("p",[a._v("Create a directory.")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" /app/postgresql/pgdatabase/data\n")])])]),s("p",[a._v("Now transfer data from master to slave.")]),a._v(" "),s("code",[a._v("\npg_basebackup -h "),s("span",{staticStyle:{color:"orangered"}},[a._v("master_ip")]),a._v(" -U replicator -D /app/postgresql/pgdatabase/data --write-recovery-conf --progress --verbose\n")]),a._v(" "),s("p",[a._v("Assign the postgres owner of all migrated directories")]),a._v(" "),s("code",[a._v("\n  chmod -R 0700 /app/postgresql/pgdatabase/data \n")]),a._v(" "),s("p",[a._v("Launching a replica and checking the replication status.")]),a._v(" "),s("p",[s("code",[a._v("pg_ctl start /app/postgresql/pgdatabase/data")])]),a._v(" "),s("p",[a._v("How to stop")]),a._v(" "),s("p",[s("code",[a._v("pg_ctl -D /var/lib/pgsql/9.6/data -m immediate stop")])]),a._v(" "),s("p",[a._v("If error change permissions as below")]),a._v(" "),s("p",[a._v("Change directory user and group.")]),a._v(" "),s("code",[a._v("\n  chown "),s("span",{staticStyle:{color:"deepskyblue"}},[a._v("user")]),a._v(" "),s("span",{staticStyle:{color:"#77bc71"}},[a._v("/var/run/folderName")])]),a._v(" "),s("br"),a._v(" "),s("code",[a._v("  \n  chgrp "),s("span",{staticStyle:{color:"deepskyblue"}},[a._v("user")]),a._v(" "),s("span",{staticStyle:{color:"#77bc71"}},[a._v("/var/run/folderName")])]),a._v(" "),s("h3",{attrs:{id:"confirm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#confirm"}},[a._v("#")]),a._v(" CONFIRM")]),a._v(" "),s("p",[a._v("On the Master Server run :")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" application_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" sent_lsn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" write_lsn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" sync_state\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" pg_stat_replication"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("h2",{attrs:{id:"master-to-master-replication-v16"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#master-to-master-replication-v16"}},[a._v("#")]),a._v(" Master-to-Master Replication v16")]),a._v(" "),s("p",[a._v("To achieve Multi-master asynchronous replication using Bucardo")]),a._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://bucardo.org/Bucardo/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Bucardo"),s("OutboundLink")],1),a._v(": is an asynchronous PostgreSQL replication system, allowing for multi-source,\nmulti-target operations. It was developed at Backcountry by Jon Jensen and Greg Sabino Mullane of End Point Corporation,\nand is now in use at many other organizations. Bucardo is free and open source software released under the BSD license.")])]),a._v(" "),s("h3",{attrs:{id:"references"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[a._v("#")]),a._v(" References:")]),a._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"https://medium.com/@logeshmohan/postgresql-replication-using-bucardo-5-4-1-6e78541ceb5e",target:"_blank",rel:"noopener noreferrer"}},[a._v("PostgreSQL Replication"),s("OutboundLink")],1)]),a._v(" "),s("li",[s("a",{attrs:{href:"https://bucardo.org/Bucardo/installation/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Bucardo Installation"),s("OutboundLink")],1)])]),a._v(" "),s("h3",{attrs:{id:"requirements"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[a._v("#")]),a._v(" Requirements")]),a._v(" "),s("p",[a._v("This tutorial was implemented in Fedora 39")]),a._v(" "),s("ol",[s("li",[a._v("Two or more database cluster")]),a._v(" "),s("li",[a._v("Bucardo")])]),a._v(" "),s("h3",{attrs:{id:"setup-database"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setup-database"}},[a._v("#")]),a._v(" Setup Database")]),a._v(" "),s("p",[a._v("This assumes Postgres was compiled with Perl support. Install Perl")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" perl-devel\n")])])]),s("p",[a._v("Create Extension in template1 postgres database")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("CREATE")]),a._v(" EXTENSION plperl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("CREATE")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("LANGUAGE")]),a._v(" plperlu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[a._v("Create bucardo user")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("create")]),a._v(" role bucardo superuser login password "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'PASSWORD'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[a._v("Create bucardo database using "),s("strong",[a._v("bucardo")]),a._v(" user")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("create")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("database")]),a._v(" bucardo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[a._v("Create "),s("span",{staticStyle:{color:"orangered"}},[s("i",[a._v("~/.pgpass")])]),a._v(" file")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("touch")]),a._v(" .pgpass\n")])])]),s("p",[a._v("Edit the file with following contents:")]),a._v(" "),s("blockquote",[s("p",[a._v("127.0.0.1:5432:bucardo:bucardo:<BUCARDO_USER_PASSWORD> "),s("br"),a._v("\n127.0.0.1:5432:*:postgres:<POSTGRES_USER_PASSWORD>")])]),a._v(" "),s("p",[a._v("Edit "),s("span",{staticStyle:{color:"orangered"}},[s("i",[a._v("pg_hba.conf")])]),a._v(" file, add lines")]),a._v(" "),s("div",{staticClass:"language-txt extra-class"},[s("pre",{pre:!0,attrs:{class:"language-txt"}},[s("code",[a._v("local\tbucardo\t\tbucardo\t\t\t\t\t    trust\nhost\tbucardo\t\tbucardo\t\t0.0.0.0/0\t\ttrust\n")])])]),s("p",[a._v("Restart postgres service")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("systemctl restart postgresql-16.service\n")])])]),s("p",[a._v("Change file permission")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" 0600 .pgpass \n")])])]),s("h3",{attrs:{id:"other-installations-fedora-39"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#other-installations-fedora-39"}},[a._v("#")]),a._v(" Other Installations (Fedora 39)")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" perl-Pod-Html\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" perl-Test-Simple\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" perl-DBI\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" perl-DBD-Pg\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dnf "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" postgresql16-plperl\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dnf "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" perl-sigtrap\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dnf "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" perl-Sys-Hostname\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dnf "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" perl-Log-Report-Dispatcher-Syslog\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dnf "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" perl-open.noarch\n")])])]),s("h3",{attrs:{id:"install-bucardo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#install-bucardo"}},[a._v("#")]),a._v(" Install Bucardo")]),a._v(" "),s("p",[a._v("First we need to install DBIx::Safe. Download it "),s("a",{attrs:{href:"https://bucardo.org/DBIx-Safe/",target:"_blank",rel:"noopener noreferrer"}},[a._v("here"),s("OutboundLink")],1)]),a._v(" "),s("blockquote",[s("p",[a._v("DBIx::Safe is a Perl module that allows for safe and controlled access to a DBI database handle. It is similar in spirit to the standard Perl module “Safe”. It is used by Bucardo to ensure that custom code does not interfere with the normal running of Bucardo.")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" xzf DBIx-Safe-1.2.5.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" DBIx-Safe-1.2.5\nperl Makefile.PL\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])])]),s("p",[a._v("Proceed to bucardo installation")]),a._v(" "),s("blockquote",[s("p",[a._v("Refer to references section for installation link and documentation. Steps:")])]),a._v(" "),s("p",[a._v("Download latest version of Bucardo "),s("a",{attrs:{href:"https://bucardo.org/Bucardo/#obtaining-bucardo",target:"_blank",rel:"noopener noreferrer"}},[a._v("here"),s("OutboundLink")],1),a._v(", untar it and switch to the directory:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" xzf Bucardo-5.6.0.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" Bucardo-5.6.0\nperl Makefile.PL\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])])]),s("p",[a._v("Create this directories")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" /var/run/bucardo/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" /var/log/bucardo/\n")])])]),s("p",[a._v("Install bucardo")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("bucardo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])])]),s("p",[a._v("You will have an opportunity to change the default parameters:")]),a._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[a._v("Current connection settings:\n\n1. Host:          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("none")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n2. Port:          5432\n3. User:          postgres\n4. Database:      postgres\n5. PID directory: /var/run/bucardo \n")])])]),s("h3",{attrs:{id:"testing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#testing"}},[a._v("#")]),a._v(" Testing")]),a._v(" "),s("blockquote",[s("p",[a._v("We need a database in both masters with some similar tables:")])]),a._v(" "),s("p",[a._v("Setting Master 1 (SourceDb)")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("psql "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("U postgres "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("W\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("create")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("database")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("clustered")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\\c "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("clustered")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("create")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("table")]),a._v(" one"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("id "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("bigint")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("primary")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("key")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("num "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("bigint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("blockquote",[s("p",[a._v("Repeat for Master 2 (DestDb)")])]),a._v(" "),s("p",[a._v("Setting Bucardo")]),a._v(" "),s("blockquote",[s("p",[a._v("Add the databases\nBucardo needs to know about each database it needs to talk to")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("bucardo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" db sourcedb "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbhost")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbport")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5432")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbname")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("clustered "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("user")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("postgres "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbpass")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("postgres\n\nbucardo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" db destdb "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbhost")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbport")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5433")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbname")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("clustered "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("user")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("postgres "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbpass")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("postgres\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("bucardo list dbs\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("bucardo list dbgroups\n")])])]),s("blockquote",[s("p",[a._v("Add the tables\nBucardo also needs to know about any tables that it may be called on to replicate. (Adding tables by the add table command does not actually start replicating them.)")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("bucardo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" all tables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--herd")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("source_dest "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("db")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("sourcedb\nbucardo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" all tables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--herd")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("dest_source "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("db")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("destdb\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("bucardo list tables\n")])])]),s("blockquote",[s("p",[a._v("Add the sequences (If exists)")]),a._v(" "),s("ol",[s("li",[a._v("Sequences should not be similar to avoid conflict")]),a._v(" "),s("li",[s("a",{attrs:{href:"https://bucardo.org/Bucardo/operations/sequences",target:"_blank",rel:"noopener noreferrer"}},[a._v("Best Practices"),s("OutboundLink")],1)])])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("bucardo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" all sequences "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--herd")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("source_dest\nbucardo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" all sequences "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--herd")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("dest_source\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("bucardo list herds\nbucardo list relgroups\n")])])]),s("p",[a._v("Set logging levels")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("bucardo "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("quick_delta_check")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\nbucardo "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("log_level")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("VERBOSE\n")])])]),s("blockquote",[s("p",[a._v("Add the syncs\nA sync is a named replication event. Each sync has a source relgroup.")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("bucardo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sync")]),a._v(" sync_source_dest "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("relgroup")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("source_dest "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("db")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("sourcedb,destdb\nbucardo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sync")]),a._v(" sync_dest_source "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("relgroup")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("dest_source "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("db")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("destdb,sourcedb\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("bucardo list syncs\n")])])]),s("h3",{attrs:{id:"start-bucardo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#start-bucardo"}},[a._v("#")]),a._v(" Start Bucardo")]),a._v(" "),s("blockquote",[s("p",[a._v("The final step is to start the Bucardo service:")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("bucardo start\n")])])]),s("p",[a._v("Verify that the Bucardo daemons are running")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Afw")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" Bucardo\n")])])]),s("h3",{attrs:{id:"test-replication"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#test-replication"}},[a._v("#")]),a._v(" Test Replication")]),a._v(" "),s("blockquote",[s("p",[a._v("Insert some records in SourceDb table(s)")])]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("with")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("data")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" generate_series"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2000000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" id\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("insert")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("into")]),a._v(" one"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" id\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("blockquote",[s("p",[a._v("Repeat for DestDb table(s)")])]),a._v(" "),s("h3",{attrs:{id:"checking-status"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#checking-status"}},[a._v("#")]),a._v(" Checking Status")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v(" bucardo status\n")])])]),s("h3",{attrs:{id:"stopping-replication"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stopping-replication"}},[a._v("#")]),a._v(" Stopping Replication")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v(" bucardo stop\n")])])]),s("h3",{attrs:{id:"sample-using-fundmaster-database"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sample-using-fundmaster-database"}},[a._v("#")]),a._v(" Sample using Fundmaster Database")]),a._v(" "),s("p",[a._v("-------------Start Sample----------------------")]),a._v(" "),s("blockquote",[s("p",[a._v("Assumes you have already loaded your existing database to both masters")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("bucardo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" db pac_sourcedb "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbhost")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbport")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5432")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbname")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pacific "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("user")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("bucardo "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbpass")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("bucardo\nbucardo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" db pac_destdb "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbhost")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbport")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5433")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbname")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pacific "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("user")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("bucardo "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("dbpass")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("bucardo\nbucardo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" all tables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--herd")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pac_source_dest "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("db")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pac_sourcedb\nbucardo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" all tables "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--herd")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pac_dest_source "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("db")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pac_destdb\n")])])]),s("blockquote",[s("p",[a._v("Remove tables without Primary Key")])]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("with")]),a._v(" mytables "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" table_schema "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'.'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" table_name "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" tbName\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" information_schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("tables")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("table_catalog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" table_schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" table_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("NOT")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("IN")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SELECT")]),a._v(" table_catalog"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" table_schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" table_name\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" information_schema"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("table_constraints\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("WHERE")]),a._v(" constraint_type "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'PRIMARY KEY'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("AND")]),a._v("\ntable_schema "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("NOT")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("IN")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'information_schema'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'pg_catalog'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'pgq'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'londiste'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'bucardo remove table '")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tbName"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' db=pac_sourcedb'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" mytables m\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("union")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("all")]),a._v(" \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' bucardo remove table '")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tbName"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' db=pac_destdb'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" mytables m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("blockquote",[s("p",[a._v("Run the generated scripts above in bash")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("bucardo remove table public.fmxi_lv "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("db")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pac_sourcedb\nbucardo remove table public.fmxi_lv "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("db")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pac_destdb\n\nbucardo validate all\nbucardo reload\n\nbucardo list herds\n\nbucardo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sync")]),a._v(" pac_source_dest_sync "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("relgroup")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pac_source_dest "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("db")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pac_sourcedb,pac_destdb\n\nbucardo "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sync")]),a._v(" pac_dest_source_sync "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("relgroup")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pac_dest_source "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("db")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("pac_destdb,pac_sourcedb\n")])])]),s("h3",{attrs:{id:"dealing-with-sequences"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dealing-with-sequences"}},[a._v("#")]),a._v(" Dealing with Sequences")]),a._v(" "),s("p",[a._v("Replicating sequences can be difficult, to avoid that:")]),a._v(" "),s("blockquote",[s("p",[a._v("Update sequences to start at a value less 1 the other and increment by 2")])]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- master 1 database")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("alter")]),a._v(" sequence hibernate_sequence "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("start")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" increment "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("no")]),a._v(" maxvalue "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("-- master 2 database")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("alter")]),a._v(" sequence hibernate_sequence "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("start")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" increment "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("no")]),a._v(" maxvalue "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("blockquote",[s("p",[a._v("Having more than 2 masters complicates the problem further 🤔")])]),a._v(" "),s("p",[a._v("-------------End Sample----------------------\n")]),s("hr"),s("p"),a._v(" "),s("h2",{attrs:{id:"load-balancing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#load-balancing"}},[a._v("#")]),a._v(" Load Balancing")]),a._v(" "),s("blockquote",[s("p",[a._v("Load balancing refers to efficiently distributing incoming network traffic across a group of backend servers, also known as a server farm or server pool. The aim to achieve a load balancer for postgreSQL cluster with multimaster and slave databases.")])]),a._v(" "),s("h3",{attrs:{id:"_1-haproxy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-haproxy"}},[a._v("#")]),a._v(" 1. HAProxy")]),a._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"https://www.haproxy.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("HAProxy"),s("OutboundLink")],1),a._v(" is a free, very fast and reliable reverse-proxy offering high availability, load balancing, and proxying for TCP and HTTP-based applications.")])]),a._v(" "),s("h3",{attrs:{id:"references-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#references-2"}},[a._v("#")]),a._v(" References:")]),a._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"https://www.haproxy.com/blog/haproxy-configuration-basics-load-balance-your-servers",target:"_blank",rel:"noopener noreferrer"}},[a._v("Official Site"),s("OutboundLink")],1)]),a._v(" "),s("li",[s("a",{attrs:{href:"https://www.youtube.com/watch?v=k4if9Ywht8U",target:"_blank",rel:"noopener noreferrer"}},[a._v("Youtube"),s("OutboundLink")],1)])]),a._v(" "),s("blockquote",[s("p",[a._v("This tutorial was implemented in Fedora 39 on a master-slave unidirectional replica")])]),a._v(" "),s("h3",{attrs:{id:"installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[a._v("#")]),a._v(" Installation")]),a._v(" "),s("p",[a._v("There are 2 ways for installing:")]),a._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"http://www.haproxy.org/download/2.9/src/haproxy-2.9.5.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[a._v("Using source packages"),s("OutboundLink")],1)]),a._v(" "),s("li",[a._v("Using native libraries")])]),a._v(" "),s("blockquote",[s("p",[a._v("We will be using native libraries")])]),a._v(" "),s("h3",{attrs:{id:"process-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#process-2"}},[a._v("#")]),a._v(" Process")]),a._v(" "),s("p",[a._v("Install HAProxy")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" haproxy\n")])])]),s("p",[a._v("Setting up HAProxy for your server")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /etc/haproxy\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /var/lib/haproxy\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("touch")]),a._v(" /var/lib/haproxy/stats\n")])])]),s("p",[a._v("create a service")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("systemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" haproxy.service\n")])])]),s("p",[a._v("Add User")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("useradd")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" haproxy\nhaproxy "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /etc/haproxy/\n")])])]),s("p",[a._v("Backup config file before your edit")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" haproxy.cfg haproxy.cfg.bkp\n")])])]),s("p",[a._v("Edit configuration file")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" haproxy.cfg\n")])])]),s("blockquote",[s("p",[a._v("remove backend static & backend app sections")])]),a._v(" "),s("p",[a._v("Defaults section content")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("defaults\n\t    mode                    tcp\n\t    log                     global\n\t    option                  tcplog\n\t    option                  dontlognull\n\t    option                  http-server-close\n\t    option                  redispatch\n\t    retries                 3\n\t    timeout http-request    10s\n\t    timeout queue           1m\n\t    timeout connect         10s\n\t    timeout client          1m\n\t    timeout server          1m\n\t    timeout http-keep-alive 10s\n\t    timeout check           10s\n\t    maxconn                 3000\n")])])]),s("p",[a._v("Changes made")]),a._v(" "),s("ol",[s("li",[a._v("mode set to "),s("strong",[a._v("tcp")])]),a._v(" "),s("li",[a._v("option                  "),s("strong",[a._v("tcplog")])]),a._v(" "),s("li",[a._v("maxconn                 "),s("strong",[a._v("3000")])])]),a._v(" "),s("p",[a._v("Frontend section content")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("frontend\tmain\n\t    mode        tcp\n\t    bind        *:5000\n\t    acl readonly.pgsql nbsrv(pgsql) eq 0\n\t    use_backend readonly.pgsql if readonly.pgsql\n\t    acl pgsql nbsrv(pgsql) gt 0\n\t    use_backend pgsql if pgsql\n")])])]),s("blockquote",[s("p",[a._v("The section is the entry point of request. The proxy listens to port "),s("strong",[a._v("5000")]),a._v(", for select statements will be sent to readonly backend service and for write operations will be sent to pgsql backend service")])]),a._v(" "),s("p",[a._v("Backend pgsql section content")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("backend pgsql\n\t    mode        tcp\n\t    option      tcp-check\n\t    server  master-db 127.0.0.1:5432 check\n")])])]),s("blockquote",[s("p",[a._v("Forward request to master server port 5432")])]),a._v(" "),s("p",[a._v("Backend readonly.pgsql section content")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("backend readonly.pgsql\n\t    mode        tcp\n\t    option      tcp-check\n\t    server  slave-db  127.0.0.1:5434 check\n")])])]),s("blockquote",[s("p",[a._v("Forward request to slave server port 5434")])]),a._v(" "),s("h3",{attrs:{id:"complete-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#complete-configuration"}},[a._v("#")]),a._v(" Complete configuration")]),a._v(" "),s("p",[a._v("After the editing, the haproxy.cfg should look like below")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("defaults\n\t    mode                    tcp\n\t    log                     global\n\t    option                  tcplog\n\t    option                  dontlognull\n\t    option                  http-server-close\n\t    option                  redispatch\n\t    retries                 3\n\t    timeout http-request    10s\n\t    timeout queue           1m\n\t    timeout connect         10s\n\t    timeout client          1m\n\t    timeout server          1m\n\t    timeout http-keep-alive 10s\n\t    timeout check           10s\n\t    maxconn                 3000\n\n\tfrontend\tmain\n\t    mode        tcp\n\t    bind        *:5000\n\t    acl readonly.pgsql nbsrv(pgsql) eq 0\n\t    use_backend readonly.pgsql if readonly.pgsql\n\t    acl pgsql nbsrv(pgsql) gt 0\n\t    use_backend pgsql if pgsql\n\n\tbackend pgsql\n        balance leastconn\n\t    mode        tcp\n\t    option      tcp-check\n\t    server  master-db 127.0.0.1:5432 check\n\n\tbackend readonly.pgsql\n        balance roundrobin\n\t    mode        tcp\n\t    option      tcp-check\n\t    server  slave-db  127.0.0.1:5434 check\n")])])]),s("p",[a._v("Another sample configuration")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("global\n    log         127.0.0.1 local2\n    chroot      /var/lib/haproxy\n    pidfile     /var/run/haproxy.pid\n    maxconn     4000\n    user        haproxy\n    group       haproxy\n    daemon\n    stats socket /var/lib/haproxy/stats mode 660 level admin\n    stats timeout 30s\n    # utilize system-wide crypto-policies\n    ssl-default-bind-ciphers PROFILE=SYSTEM\n    ssl-default-server-ciphers PROFILE=SYSTEM\n\ndefaults\n    mode\t\t    tcp\n    log                     global\n    option                  tcplog\n    option \t            tcpka\n    option                  dontlognull\n    option\t            http-server-close\n    option                  redispatch\n    retries                 3\n    timeout http-request    10s\n    timeout queue           1m\n    timeout connect         10s\n    timeout client          1m\n    timeout server          1m\n    timeout http-keep-alive 10s\n    timeout check           10s\n    maxconn                 3000\n\n#---------------------------------------------------------------------\n# main frontend which proxys to the backends\n#---------------------------------------------------------------------\n\n# Frontend for read-only operations\nfrontend readonly_frontend\n    bind *:5001\n    mode tcp\n    tcp-request content accept if WAIT_END\n    tcp-request inspect-delay 1s\n    tcp-request content accept if WAIT_END\n    acl is_read_only dst_port 5434\n    use_backend readonly_backend if is_read_only\n    default_backend write_backend\n\n# Frontend for write operations\nfrontend write_frontend\n    bind *:5000\n    mode tcp\n    tcp-request content accept if WAIT_END\n    tcp-request inspect-delay 1s\n    tcp-request content accept if WAIT_END\n    use_backend write_backend\n\n# Backend for read-only operations\nbackend readonly_backend\n    mode tcp\n    balance roundrobin\n    server pg_readonly_node1 127.0.0.1:5434 check\n\n# Backend for write operations\nbackend write_backend\n    mode tcp\n    balance leastconn\n    server pg_write_node1 127.0.0.1:5432 check\n    server pg_write_node2 127.0.0.1:5433 check\n")])])]),s("h3",{attrs:{id:"finish-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#finish-configuration"}},[a._v("#")]),a._v(" Finish configuration")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("setsebool "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-P")]),a._v(" haproxy_connect_any "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\nsystemctl restart haproxy.service\n")])])]),s("p",[a._v("Check service")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-antp")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("egrep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5000")]),a._v("\njournalctl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-xeu")]),a._v(" haproxy.service\n")])])]),s("h3",{attrs:{id:"testing-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#testing-2"}},[a._v("#")]),a._v(" Testing")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("psql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5000")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("\"select setting from pg_settings where name='port'\"")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\npsql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5000")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"select inet_server_addr(), inet_server_port()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("blockquote",[s("p",[a._v("We are making the requests to proxy port 5000, we expect it to redirect our request to the servers specified")])]),a._v(" "),s("p",[s("strong",[a._v("Do more tests using pgbench and monitor")])]),a._v(" "),s("hr"),a._v(" "),s("h3",{attrs:{id:"_2-pgpool-ii"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-pgpool-ii"}},[a._v("#")]),a._v(" 2. PgPool-II")]),a._v(" "),s("blockquote",[s("p",[a._v("Read "),s("a",{attrs:{href:"https://www.pgpool.net/docs/latest/en/html/runtime-config-load-balancing.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Reference Guide"),s("OutboundLink")],1)])]),a._v(" "),s("p",[a._v("Install")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dnf "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" pgpool-II\n")])])]),s("p",[a._v("Configuration")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /etc/pgpool-II\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" pgpool.conf.sample pgpool.conf\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v("  pgpool.conf\n")])])]),s("p",[a._v("Update "),s("strong",[a._v("pgpool.conf")]),a._v(" contents")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("listen_addresses = '*'\nport = 9999\n\npid_file_name = 'pgpool.pid'\n\nbackend_hostname0 = 'localhost'\nbackend_port0 = 5432\nbackend_weight0 = 0   # send select statements to qreplica\nbackend_data_directory0 = '/var/lib/pgsql/16/data'\nbackend_flag0 = 'ALWAYS_PRIMARY'\nbackend_application_name0 = 'server5432'\n                                   \nbackend_hostname1 = 'localhost'\nbackend_port1 = 5434\nbackend_weight1 = 1\nbackend_data_directory1 = '/var/lib/pgsql/replica'\nbackend_flag1 = 'ALLOW_TO_FAILOVER'\nbackend_application_name1 = 'server5434'\n\nhealth_check_period = 10\nload_balance_mode = on\n\n#replication user and password\nsr_check_user = 'replicator'\nhealth_check_user = 'replicator'\nsr_check_password = 'postgres'\nhealth_check_password = 'postgres'\n\n#comment in production\nlog_statement = on\nlog_per_node_statement = on\n\nallow_clear_text_frontend_auth = on\nauthentication_timeout = 1min\nallow_sql_comments = on\nignore_leading_white_space = on\n\n")])])]),s("p",[a._v("Test Load Balancing & Read-Write separation")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("su")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v("  pgpool "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dn")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# OR")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("su")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v("  pgpool "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-D")]),a._v("\n")])])]),s("p",[a._v("Start with logfile")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("pgpool "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /var/log/pgpool-II/pgpool.log "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("\n")])])]),s("p",[a._v("Confirm PgPool is running")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("psql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9999")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--command")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"SHOW POOL_NODES;"')]),a._v("\n")])])]),s("blockquote",[s("p",[a._v("9999 - PgPool port")])]),a._v(" "),s("p",[a._v("You can also configure PgPool II for connection pooling")]),a._v(" "),s("blockquote",[s("p",[a._v("You can use "),s("strong",[a._v("PgBouncer")]),a._v(" instead, read below")])]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("process_management_mode = dynamic\nprocess_management_strategy = gentle\nnum_init_children = 32\nmin_spare_children = 1\nmax_spare_children = 32\nmax_pool = 32\nchild_life_time = 1min\n")])])]),s("hr"),a._v(" "),s("h2",{attrs:{id:"failover-failback"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#failover-failback"}},[a._v("#")]),a._v(" Failover & Failback")]),a._v(" "),s("blockquote"),a._v(" "),s("h2",{attrs:{id:"connection-pooling"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#connection-pooling"}},[a._v("#")]),a._v(" Connection Pooling")]),a._v(" "),s("blockquote",[s("p",[a._v("Managing database connections to improve performance and reduce the overhead of database connections.\n"),s("a",{attrs:{href:"https://medium.com/@dmitry.romanoff/using-pgbouncer-to-improve-performance-and-reduce-the-load-on-postgresql-b54b78deb425",target:"_blank",rel:"noopener noreferrer"}},[a._v("Read More"),s("OutboundLink")],1)])]),a._v(" "),s("h3",{attrs:{id:"pgbouncer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pgbouncer"}},[a._v("#")]),a._v(" PgBouncer")]),a._v(" "),s("p",[a._v("Installing")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" pgbouncer\n")])])]),s("p",[s("strong",[a._v("Configuration")])]),a._v(" "),s("p",[a._v("Open configuration file")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/pgbouncer/pgbouncer.ini\n")])])]),s("blockquote",[s("p",[a._v("You can configure as shown "),s("a",{attrs:{href:"https://medium.com/@dmitry.romanoff/using-pgbouncer-to-improve-performance-and-reduce-the-load-on-postgresql-b54b78deb425",target:"_blank",rel:"noopener noreferrer"}},[a._v("here"),s("OutboundLink")],1)])]),a._v(" "),s("p",[a._v("Authentication")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" concat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'\"'")]),a._v(",usename,"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'\" \"'")]),a._v(",passwd,"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'\"'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" from pg_shadow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("blockquote",[s("p",[a._v("Add the query result to "),s("em",[a._v("userslist.txt")])])]),a._v(" "),s("p",[a._v("Sample configuration")]),a._v(" "),s("blockquote",[s("p",[a._v("This also works with pg-pool")])]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v(";; database name = connect string\n;;\n;; connect string params:\n;;   dbname= host= port= user= password=\n;;   client_encoding= datestyle= timezone=\n;;   pool_size= connect_query=\n[databases]\n\n; foodb over unix socket\n;foodb =\n\n; redirect bardb to bazdb on localhost\n;bardb = host=localhost dbname=bazdb\n\n; access to dest database will go with single user\n;forcedb = host=127.0.0.1 port=300 user=baz password=foo client_encoding=UNICODE datestyle=ISO connect_query='SELECT 1'\n* = host=127.0.0.1 port=5000 user=postgres password=postgres client_encoding=UNICODE datestyle=ISO connect_query='SELECT 1'\n\n; use custom pool sizes\n;nondefaultdb = pool_size=50 reserve_pool_size=10\n\n; fallback connect string\n;* = host=testserver\n\n;; Configuration section\n[pgbouncer]\n\n;;;\n;;; Administrative settings\n;;;\n\nlogfile = /var/log/pgbouncer/pgbouncer.log\npidfile = /var/run/pgbouncer/pgbouncer.pid\n\n;;;\n;;; Where to wait for clients\n;;;\n\n; ip address or * which means all ip-s\nlisten_addr = 127.0.0.1\nlisten_port = 6432\n\n; unix socket is also used for -R.\n; On debian it should be /var/run/postgresql\n;unix_socket_dir = /tmp\n;unix_socket_mode = 0777\n;unix_socket_group =\n\n;;;\n;;; Authentication settings\n;;;\n\n; any, trust, plain, crypt, md5\nauth_type = trust\n;auth_file = /8.0/main/global/pg_auth\nauth_file = /etc/pgbouncer/userlist.txt\n\n;; Query to use to fetch password from database.  Result\n;; must have 2 columns - username and password hash.\n;auth_query = SELECT usename, passwd FROM pg_shadow WHERE usename=$1\n\n;;;\n;;; Users allowed into database 'pgbouncer'\n;;;\n\n; comma-separated list of users, who are allowed to change settings\n;admin_users = user2, someadmin, otheradmin\n\n; comma-separated list of users who are just allowed to use SHOW command\n;stats_users = stats, root\n\n;;;\n;;; Pooler personality questions\n;;;\n\n; When server connection is released back to pool:\n;   session      - after client disconnects\n;   transaction  - after transaction finishes\n;   statement    - after statement finishes\npool_mode = transaction\n\n;\n; Query for cleaning connection immediately after releasing from client.\n; No need to put ROLLBACK here, pgbouncer does not reuse connections\n; where transaction is left open.\n;\n; Query for 8.3+:\n;   DISCARD ALL;\n;\n; Older versions:\n;   RESET ALL; SET SESSION AUTHORIZATION DEFAULT\n;\n; Empty if transaction pooling is in use.\n;\nserver_reset_query = DISCARD ALL\n\n\n; Whether server_reset_query should run in all pooling modes.\n; If it is off, server_reset_query is used only for session-pooling.\n;server_reset_query_always = 0\n\n;\n; Comma-separated list of parameters to ignore when given\n; in startup packet.  Newer JDBC versions require the\n; extra_float_digits here.\n;\n;ignore_startup_parameters = extra_float_digits\n\n;\n; When taking idle server into use, this query is ran first.\n;   SELECT 1\n;\n;server_check_query = select 1\n\n; If server was used more recently that this many seconds ago,\n; skip the check query.  Value 0 may or may not run in immediately.\n;server_check_delay = 30\n\n;; Use &lt;appname - host> as application_name on server.\n;application_name_add_host = 0\n\n;;;\n;;; Connection limits\n;;;\n\n; total number of clients that can connect\nmax_client_conn = 5000\n\n; default pool size.  20 is good number when transaction pooling\n; is in use, in session pooling it needs to be the number of\n; max clients you want to handle at any moment\ndefault_pool_size = 20\n\n;; Minimum number of server connections to keep in pool.\n;min_pool_size = 0\n\n; how many additional connection to allow in case of trouble\n;reserve_pool_size = 5\n\n; if a clients needs to wait more than this many seconds, use reserve pool\n;reserve_pool_timeout = 3\n\n; how many total connections to a single database to allow from all pools\n;max_db_connections = 50\n;max_user_connections = 50\n\n; If off, then server connections are reused in LIFO manner\n;server_round_robin = 0\n\n;;;\n;;; Logging\n;;;\n\n;; Syslog settings\n;syslog = 0\n;syslog_facility = daemon\n;syslog_ident = pgbouncer\n\n; log if client connects or server connection is made\n;log_connections = 1\n\n; log if and why connection was closed\n;log_disconnections = 1\n\n; log error messages pooler sends to clients\n;log_pooler_errors = 1\n\n;; Period for writing aggregated stats into log.\n;stats_period = 60\n\n;; Logging verbosity.  Same as -v switch on command line.\n;verbose=0\n\n;;;\n;;; Timeouts\n;;;\n\n;; Close server connection if its been connected longer.\n;server_lifetime = 1200\n\n;; Close server connection if its not been used in this time.\n;; Allows to clean unnecessary connections from pool after peak.\n;server_idle_timeout = 60\n\n;; Cancel connection attempt if server does not answer takes longer.\n;server_connect_timeout = 15\n\n;; If server login failed (server_connect_timeout or auth failure)\n;; then wait this many second.\n;server_login_retry = 15\n\n;; Dangerous.  Server connection is closed if query does not return\n;; in this time.  Should be used to survive network problems,\n;; _not_ as statement_timeout. (default: 0)\n;query_timeout = 0\n\n;; Dangerous.  Client connection is closed if the query is not assigned\n;; to a server in this time.  Should be used to limit the number of queued\n;; queries in case of a database or network failure. (default: 120)\n;query_wait_timeout = 120\n\n;; Dangerous.  Client connection is closed if no activity in this time.\n;; Should be used to survive network problems. (default: 0)\n;client_idle_timeout = 0\n\n;; Disconnect clients who have not managed to log in after connecting\n;; in this many seconds.\n;client_login_timeout = 60\n\n;; Clean automatically created database entries (via \"*\") if they\n;; stay unused in this many seconds.\n; autodb_idle_timeout = 3600\n\n;; How long SUSPEND/-R waits for buffer flush before closing connection.\n;suspend_timeout = 10\n\n;; Close connections which are in \"IDLE in transaction\" state longer than\n;; this many seconds.\n;idle_transaction_timeout = 0\n\n;;;\n;;; Low-level tuning options\n;;;\n\n;; buffer for streaming packets\n;pkt_buf = 4096\n\n;; man 2 listen\n;listen_backlog = 128\n\n;; Max number pkt_buf to process in one event loop.\n;sbuf_loopcnt = 5\n\n;; Maximum Postgres protocol packet size.\n;max_packet_size = 2147483647\n\n;; networking options, for info: man 7 tcp\n\n;; Linux: notify program about new connection only if there\n;; is also data received.  (Seconds to wait.)\n;; On Linux the default is 45, on other OS'es 0.\n;tcp_defer_accept = 0\n\n;; In-kernel buffer size (Linux default: 4096)\n;tcp_socket_buffer = 0\n\n;; whether tcp keepalive should be turned on (0/1)\n;tcp_keepalive = 1\n\n;; following options are Linux-specific.\n;; they also require tcp_keepalive=1\n\n;; count of keepaliva packets\n;tcp_keepcnt = 0\n\n;; how long the connection can be idle,\n;; before sending keepalive packets\n;tcp_keepidle = 0\n\n;; The time between individual keepalive probes.\n;tcp_keepintvl = 0\n\n;; DNS lookup caching time\n;dns_max_ttl = 15\n\n;; DNS zone SOA lookup period\n;dns_zone_check_period = 0\n\n;; DNS negative result caching time\n;dns_nxdomain_ttl = 15\n\n;;;\n;;; Random stuff\n;;;\n\n;; Hackish security feature.  Helps against SQL-injection - when PQexec is disabled,\n;; multi-statement cannot be made.\n;disable_pqexec=0\n\n;; Config file to use for next RELOAD/SIGHUP.\n;; By default contains config file from command line.\n;conffile\n\n;; Win32 service name to register as.  job_name is alias for service_name,\n;; used by some Skytools scripts.\n;service_name = pgbouncer\n;job_name = pgbouncer\n\n;; Read additional config from the /etc/pgbouncer/pgbouncer-other.ini file\n;%include /etc/pgbouncer/pgbouncer-other.ini\n")])])]),s("hr"),a._v(" "),s("h2",{attrs:{id:"performance-testing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#performance-testing"}},[a._v("#")]),a._v(" Performance Testing")]),a._v(" "),s("blockquote",[s("p",[a._v("Aim is to use a load testing tool to test postgreSQL database setup")])]),a._v(" "),s("h3",{attrs:{id:"pgbench"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pgbench"}},[a._v("#")]),a._v(" PgBench")]),a._v(" "),s("blockquote",[s("p",[a._v("A tool shipped together with postgres. Found in "),s("strong",[a._v("/usr/pgsql-16/bin")]),a._v(" directory")])]),a._v(" "),s("p",[a._v("Generate Test Data")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("/usr/pgsql-16/bin/pgbench "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(" stressdb "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5432")]),a._v("\n")])])]),s("blockquote",[s("p",[a._v("Use  a scale_factor of 100 to generate data i.e 10M records")])]),a._v(" "),s("p",[a._v("Bench mark database")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("/usr/pgsql-16/bin/pgbench "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5000")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-T")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("120")]),a._v(" stressdb "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres\n")])])]),s("blockquote",[s("p",[a._v("5000 = database connection port or load balancer binding port, 100 = number of connections 120 - Time in seconds")])]),a._v(" "),s("p",[a._v("Bench mark using threads")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("/usr/pgsql-16/bin/pgbench "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-T")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("120")]),a._v("  stressdb "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5000")]),a._v("\n\n/usr/pgsql-16/bin/pgbench "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-S")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-T")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("60")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" readonly.sql stress "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5000")]),a._v("\n")])])]),s("blockquote",[s("p",[a._v("2 = number of threads")])]),a._v(" "),s("p",[a._v("Using sql script")]),a._v(" "),s("blockquote",[s("p",[a._v("Create a file readonly.sql")])]),a._v(" "),s("p",[a._v("Contents of readonly.sql")]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" abalance "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" pgbench_accounts "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" aid "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" abalance "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" pgbench_accounts "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" aid "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" pgbench_tellers  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" tid "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" pgbench_branches "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" bid "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" tid "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" pgbench_history "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" bid "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[a._v("Run the bench mark")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("/usr/pgsql-16/bin/pgbench "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-j")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-T")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("60")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" readonly.sql stress "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5000")]),a._v("\n")])])]),s("hr"),a._v(" "),s("h2",{attrs:{id:"postgres-upgrade"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#postgres-upgrade"}},[a._v("#")]),a._v(" Postgres Upgrade")]),a._v(" "),s("blockquote",[s("p",[a._v("How to upgrade from one version of postgres to another.\nReference "),s("a",{attrs:{href:"https://medium.com/@malymohsem/say-goodbye-to-downtime-upgrade-postgresql-14-to-16-effortlessly-with-pg-upgrade-42ef4dbf8524",target:"_blank",rel:"noopener noreferrer"}},[a._v("Upgrade PostgreSQL 14 to 16 Effortlessly with pg_upgrade"),s("OutboundLink")],1)])]),a._v(" "),s("h5",{attrs:{id:"stop-the-old-cluster"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stop-the-old-cluster"}},[a._v("#")]),a._v(" Stop the old cluster")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("systemctl stop postgresql-14.service\n")])])]),s("h4",{attrs:{id:"install-new-cluster"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#install-new-cluster"}},[a._v("#")]),a._v(" Install new cluster")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dnf "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" https://download.postgresql.org/pub/repos/yum/reporpms/F-39-x86_64/pgdg-fedora-repo-latest.noarch.rpm\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dnf "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" postgresql16-server\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" /usr/pgsql-16/bin/postgresql-16-setup initdb\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" postgresql-16\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl start postgresql-16\n")])])]),s("h5",{attrs:{id:"change-the-port"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#change-the-port"}},[a._v("#")]),a._v(" Change the port")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /var/lib/pgsql/16/data/postgresql.conf\n")])])]),s("h4",{attrs:{id:"run-upgrade"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run-upgrade"}},[a._v("#")]),a._v(" Run upgrade")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("/usr/pgsql-16/bin/pg_upgrade "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-b")]),a._v(" /usr/pgsql-14/bin/ "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-B")]),a._v(" /usr/pgsql-16/bin/ "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" /var/lib/pgsql/14/data/ "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-D")]),a._v(" /var/lib/pgsql/16/data/ "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' -c config_file=/var/lib/pgsql/14/data/postgresql.conf'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-O")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("' -c config_file=/var/lib/pgsql/16/data/postgresql.conf'")]),a._v("\n")])])]),s("h5",{attrs:{id:"start-new-cluster"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#start-new-cluster"}},[a._v("#")]),a._v(" Start new cluster")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("systemctl start postgresql-16.service\n")])])]),s("h4",{attrs:{id:"flush-changes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flush-changes"}},[a._v("#")]),a._v(" Flush changes")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("/usr/pgsql-16/bin/vacuumdb "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5433")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--all")]),a._v(" --analyze-in-stages\n")])])]),s("h4",{attrs:{id:"confirmation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#confirmation"}},[a._v("#")]),a._v(" Confirmation")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("/usr/pgsql-16/bin/psql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-U")]),a._v(" postgres "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5433")]),a._v("\n")])])]),s("h4",{attrs:{id:"winding-up"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#winding-up"}},[a._v("#")]),a._v(" Winding Up")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v(" delete_old_cluster.sh or "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rf")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'/var/lib/pgsql/14/data'")]),a._v("\n")])])]),s("h4",{attrs:{id:"remove-old-postgresql-packages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#remove-old-postgresql-packages"}},[a._v("#")]),a._v(" Remove old PostgreSQL packages")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("dnf remove  postgresql14-*\n")])])]),s("h2",{attrs:{id:"cpu-memory-storage-metrics"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cpu-memory-storage-metrics"}},[a._v("#")]),a._v(" CPU, Memory & Storage Metrics")]),a._v(" "),s("blockquote",[s("p",[a._v("How to configure pg_stats extension to show CPU, Memory and Storage metrics in PgAdmin4 dashboard")])]),a._v(" "),s("h3",{attrs:{id:"postgres-stats-extension"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#postgres-stats-extension"}},[a._v("#")]),a._v(" POSTGRES STATS EXTENSION")]),a._v(" "),s("blockquote",[s("p",[a._v("A postgresql extension that provides system metrics.\nReference link "),s("a",{attrs:{href:"https://www.snowdba.com/install-system_stats-extenstion-postgres-16-rhel-8/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Install system_stats extenstion postgres 16 rhel 8"),s("OutboundLink")],1)])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("subscription-manager repos "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--enable")]),a._v(" codeready-builder-for-rhel-8-x86_64-rpms\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" perl-IPC-Run\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dnf "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" postgresql16-devel\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dnf "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" redhat-rpm-config\n")])])]),s("blockquote",[s("p",[a._v("Download the file zip file "),s("a",{attrs:{href:"https://github.com/EnterpriseDB/system_stats/releases",target:"_blank",rel:"noopener noreferrer"}},[a._v("EnterpriseDB /system_stats"),s("OutboundLink")],1)])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("gunzip system_stats-2.1.tar.gz\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" system_stats-2.1\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/usr/pgsql-16/bin:'),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),a._v('"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("USE_PGXS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/usr/pgsql-16/bin:'),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),a._v('"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("USE_PGXS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),s("h3",{attrs:{id:"create-the-extension"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-the-extension"}},[a._v("#")]),a._v(" Create the extension")]),a._v(" "),s("blockquote",[s("p",[a._v("Connect to database using psql and:")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("create extension system_stats"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("blockquote",[s("p",[a._v("Refresh PgAdmin4 for changes to reflect")])]),a._v(" "),s("h2",{attrs:{id:"postgresql-prometheus-grafana"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#postgresql-prometheus-grafana"}},[a._v("#")]),a._v(" PostgreSQL, Prometheus & Grafana")]),a._v(" "),s("blockquote",[s("p",[a._v("We will be using docker for this setup. It's good to setup the CPU, Memory & Storage Metrics setup above")])]),a._v(" "),s("h4",{attrs:{id:"pull-the-docker-images"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pull-the-docker-images"}},[a._v("#")]),a._v(" Pull the docker images")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull prom/prometheus\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull grafana/grafana\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull quay.io/prometheuscommunity/postgres-exporter\n")])])]),s("h3",{attrs:{id:"create-a-docker-virtual-network"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-a-docker-virtual-network"}},[a._v("#")]),a._v(" Create a docker virtual network")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network create monitoring-network\n")])])]),s("h3",{attrs:{id:"run-postgres-exporter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run-postgres-exporter"}},[a._v("#")]),a._v(" Run postgres-exporter")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Replace with database credentials")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" postgres_exporter.yml "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<<")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('EOF\n#DATA_SOURCE_NAME: "postgresql://DB_USER:DB_PASSWORD@DB_HOST:DB_PORT/DB_NAME?sslmode=disable"\nEOF')]),a._v("\n")])])]),s("h3",{attrs:{id:"run-postgres-exporter-container"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run-postgres-exporter-container"}},[a._v("#")]),a._v(" Run postgres-exporter container")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Replace with database credentials")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v("   "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("postgres-exporter  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("monitoring-network   "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9187")]),a._v(":9187   "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" ./postgres_exporter.yml:/etc/postgres_exporter.yml   "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" DATA_SOURCE_NAME: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"postgresql://DB_USER:DB_PASSWORD@DB_HOST:DB_PORT/DB_NAME?sslmode=disable"')]),a._v("   quay.io/prometheuscommunity/postgres-exporter   "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--config.file")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/etc/postgres_exporter.yml\n")])])]),s("h3",{attrs:{id:"run-prometheus"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run-prometheus"}},[a._v("#")]),a._v(" Run Prometheus")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" prometheus.yml "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<<")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("EOF\nscrape_configs:\n- job_name: 'postgres'\n  static_configs:\n    - targets: ['postgres-exporter:9187']\nEOF")]),a._v("\n")])])]),s("h3",{attrs:{id:"run-prometheus-container"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run-prometheus-container"}},[a._v("#")]),a._v(" Run prometheus container")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" prometheus  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("monitoring-network  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9090")]),a._v(":9090  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" ./prometheus.yml:/etc/prometheus/prometheus.yml  prom/prometheus\n")])])]),s("h3",{attrs:{id:"confirm-prometheus-is-running"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#confirm-prometheus-is-running"}},[a._v("#")]),a._v(" Confirm prometheus is running")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Navigate on browser. ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Replace with your IP address")]),a._v("\n\nhttp://MACHINE_IP:9090\n")])])]),s("h3",{attrs:{id:"run-grafana"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run-grafana"}},[a._v("#")]),a._v(" Run grafana")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("grafana "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("monitoring-network  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3000")]),a._v(":3000 grafana/grafana\n")])])]),s("h3",{attrs:{id:"confirm-prometheus-is-running-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#confirm-prometheus-is-running-2"}},[a._v("#")]),a._v(" Confirm prometheus is running")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Navigate on browser. ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Replace with your IP address")]),a._v("\n\nhttp://MACHINE_IP:3000\n")])])]),s("h3",{attrs:{id:"onwards"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#onwards"}},[a._v("#")]),a._v(" Onwards")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Remember to replace containers if IP address changes")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" container start postgres-exporter\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" container start prometheus\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" container start grafana\n")])])]),s("h2",{attrs:{id:"good-practices"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#good-practices"}},[a._v("#")]),a._v(" Good practices")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("[https://stackoverflow.com/questions/45782327/org-postgresql-util-psqlexception-error-column-user0-id-does-not-exist-hibe](https://stackoverflow.com/questions/45782327/org-postgresql-util-psqlexception-error-column-user0-id-does-not-exist-hibe)\n")])])]),s("ol",[s("li",[s("p",[a._v("Don't use Upper letters in the name of database, schema, tables or columns in PostgreSQL. Else you should to escape\nthis names with quotes, and this can cause Syntax errors, so instead you can use :")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v('@Table(name="table_name", schema = "schame_name")\n^^^^^^^^^^             ^^^^^^^^^^^\n')])])])]),a._v(" "),s("li",[s("p",[a._v("The keyword USER is reserved keyword in PostgreSQL take a look at")]),a._v(" "),s("p",[s("strong",[a._v("+----------+-----------+----------+-----------+---------+\n| Key Word |PostgreSQL |SQL:2003 | SQL:1999 | SQL-92 |\n+----------+-----------+----------+-----------+---------+\n| .... .... .... .... .... |\n+----------+-----------+----------+-----------+---------+\n| USER | reserved |reserved | reserved | reserved|")]),a._v("\n+----------+-----------+----------+-----------+---------+")])]),a._v(" "),s("li",[s("p",[a._v("The difference between Dto and Entity, its good practice to use Entity in the end of the name of your Entity for\nexample\nUserEntity")])])]),a._v(" "),s("h2",{attrs:{id:"important-links"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#important-links"}},[a._v("#")]),a._v(" Important Links")]),a._v(" "),s("p",[a._v("https://www.postgresqltutorial.com/\n"),s("a",{attrs:{href:"https://postgrescheatsheet.com/#/tables",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://postgrescheatsheet.com/#/tables"),s("OutboundLink")],1),a._v(" "),s("a",{attrs:{href:"https://medium.com/coding-blocks/creating-user-database-and-adding-access-on-postgresql-8bfcd2f4a91e",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://medium.com/coding-blocks/creating-user-database-and-adding-access-on-postgresql-8bfcd2f4a91e"),s("OutboundLink")],1),a._v("\nhttps://www.postgresqltutorial.com/postgresql-reset-password/")])])}),[],!1,null,null,null);s.default=n.exports}}]);